# PacManDSL

This project contains a DSL for generating `.pddl` files for a PacMan planning problem.

It allows specifying instances of the PacMan Food-Problem (see below) without knowledge of `PDDL`.

## PacMan Food-Problem
A PacMan Food-Problem consists of
- A Maze (Dimensions and Walls)
- A starting position for the actor PacMan
- Location(s) of collectable food-markers

To solve the Food-Problem, a series of steps is needed that collects all food markers.
- The Maze can be traversed by PacMan one step at a time, going up, down, left or right.
- PacMan cannot enter cells that are a wall.
- PacMan can collect (eat) food-markers if they are in the same cell as him

## PDDL
To describe the PacMan Food-Problem in PDDL, two files are needed:
1. A file describing the domain, aka the problem-class that needs solving. This is basically what has been done in natural language in the second bullet-list above. 
2. A file describing the problem itself, aka the problem-instance. This includes the items in the first bullet-list above.

The first file does not change between problem-instances. It therefore does not need to be generated and can be re-used. It is located in `./pacman-domain.pddl`.
The second file is what will be generated by this DSL.

## Generating a Problem-Instance with PacManDSL
1. Open this directory with [JetBrains MPS](https://www.jetbrains.com/mps/download/)
2. Open the `Project` tool-window on the top left corner and make sure `Logical View` is the selected viewing option
3. You will see two "subdirectories"
   1. The `PacMan.sandbox` solution. This is were you will create your problem-instances
   2. The `PacMan` language. This is where the DSL is defined. You do not need to change anything here
4. In `PacMan.sandbox/PacMan/sandbox/` there is already a problem-instance which you can modify. You can also create a new instance by left-clicking on the directory and selecting `new -> maze`
5. Enter the desired problem-instances. The coordinates of the maze-cells are 1-based
6. Left-click on your problem-instance in the Logical View on the left hand side. Select `Preview Generated Text`
7. This is the `.pddl` file for your instance of the food problem. Upload it to together with `./pacman-domain.pddl` to an online solver like [https://editor.planning.domains](https://editor.planning.domains) to get a solution plan for your problem-instance


## Possible improvements:
- Wall-segments instead of individual wall pieces
- Spreadsheet-like Maze visualisation
- Proper automated export of .pddl file
- Standalone IDE
